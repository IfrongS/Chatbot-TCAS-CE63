<!DOCTYPE html>
<html>
    <header></header>


    <body>

        
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-database.js"></script>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">    


<div onload="readdb()" class="container">
    <button onclick="readdb()"> แสดงข้อมูล </button>
    <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Date</th>
            <th scope="col">Status</th>
            <th scope="col">user_input </th>
            <th scope="col">user_name </th>
           
          </tr>
        </thead>
        <tbody>
            
          <tr>
            <th id = "a1" scope="row">1</th>
            <td id = "a2">Mark</td>
            <td id = "a3">Otto</td>
            <td id = "a4">@mdo</td>
          </tr>
            
          <tr>
            <th scope="row">2</th>
            <td>Jacob</td>
            <td>Thornton</td>
            <td>@fat</td>
          </tr>
          
        </tbody>
      </table>
      
      
        
    <p id="myParagraph"></p><br>

    
</div>
    
  

        
    
    
        <script>
        var config = {
            apiKey: "AIzaSyAA9oD8RF4yxb6syvO3XU6xtAvGiBqR66w",
            authDomain: "chatbot-pdbp.firebaseapp.com",
            databaseURL: "https://chatbot-pdbp.firebaseio.com/",
            storageBucket: "chatbot-pdbp.appspot.com",
            messagingSenderId: "563252962870",
            
        };
        // Initialize Firebase
        firebase.initializeApp(config);
        var database = firebase.database();
        var user = database.ref().child("username");

        
       /* function writeUserData(){
        firebase.database().ref('users/email' ).push({
        username: '1000',
        email: '1000',
        profile_picture : '619'
        });
        }*/

       


        function readdb(){
        var db = firebase.database().ref("data/")
      
        //var x ='';
        var z = '';
        db.once('value', (snapshot) => {
         snapshot.forEach((childSnapshot) => {
            var x ='';
            var childKey = childSnapshot.key;
            var childData = childSnapshot.val();
            
            
            //x=x+ '  key = ' + childKey  ;
            x=x+ '      Data  '   ;    
                
          
            var db2 = firebase.database().ref("data/"+childKey)
                
                db2.once('value', (snapshot) => {
                   // z=z+x+'       '+ "<tr><button  onclick='update(childKey)'>   Trained  </button></tr>  <br>" ;
                    
                    snapshot.forEach((childSnapshot) => {
                    
                    var childKey2 = childSnapshot.key;    
                    var childData2 = childSnapshot.val();
                    
                    
                    z=z + "  <td> " +childKey2 +' =     ' +  childData2  + " </td><br> " ;
                   
                    document.getElementById("myParagraph").innerHTML=z;
                
            });

            
            //document.getElementById("myParagraph").innerHTML=z;
            //document.write(z);
            
        });
    
            
        });
           
      
        });
    }

        function update(childKey){
            var childKey = childKey;
            var db3 = firebase.database().ref("data/"+childKey)
            db3.update({status : 'trained'});

        }

        
        

        window.onload = function(){
            var ref = firebase.database().ref("data");
            ref.once('value').then(function(dataSnapshot){
                console.log(dataSnapshot.val());
            });
        }
  
        </script>

      
        
        
       
        
</body>

</html>